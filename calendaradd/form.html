<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ ‚Äî –°–ï–¢–¨ –í–õ–ê–°–¢–ò</title>
<style>
body { font-family: system-ui, sans-serif; max-width: 600px; margin: 40px auto; background: #f9f9f9; padding: 20px; border-radius: 16px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
input, textarea { width: 100%; margin: 10px 0; padding: 10px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; }
button { width: 100%; background: #222; color: white; border: none; padding: 12px; font-size: 18px; border-radius: 10px; cursor: pointer; }
button:hover { background: #444; }
</style>
</head>
<body>
  <h1>üìÖ –î–æ–±–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</h1>
  <input id="summary" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è">
  <textarea id="description" rows="3" placeholder="–û–ø–∏—Å–∞–Ω–∏–µ"></textarea>
  <input id="location" placeholder="–ú–µ—Å—Ç–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—è">
  <label>–î–∞—Ç–∞ –Ω–∞—á–∞–ª–∞</label>
  <input id="start" type="datetime-local">
  <label>–î–∞—Ç–∞ –æ–∫–æ–Ω—á–∞–Ω–∏—è</label>
  <input id="end" type="datetime-local">
  <button onclick="submitEvent()">–î–æ–±–∞–≤–∏—Ç—å</button>

  <p style="text-align:center; margin-top:20px;">
    –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–ª–µ–Ω–¥–∞—Ä—å:  
    <a href="/calendar.ics">calendar.ics</a>
  </p>

  <script>
    async function submitEvent() {
      const event = {
        summary: document.getElementById("summary").value,
        description: document.getElementById("description").value,
        location: document.getElementById("location").value,
        start: document.getElementById("start").value,
        end: document.getElementById("end").value
      };
      const res = await fetch("/add", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(event)
      });
      const data = await res.json();
      if (data.status === "ok") alert("‚úÖ –°–æ–±—ã—Ç–∏–µ –¥–æ–±–∞–≤–ª–µ–Ω–æ!");
      else alert("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏.");
    }
  </script>
</body>
</html>
